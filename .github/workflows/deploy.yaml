# name: CI and Deploy to Onâ€‘Prem

# on:
#   push:
#     branches: [ "main" ]

# jobs:
#   build-and-deploy:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v4

#       - name: Set up Python
#         uses: actions/setup-python@v5
#         with:
#           python-version: "3.11"

#       - name: Install deps & run tests
#         run: |
#           python -m pip install --upgrade pip
#           pip install -r requirements.txt
#           pytest

#       - name: Deploy over SSH
#         uses: appleboy/ssh-action@v1.0.3
#         with:
#           host: your.server.ip
#           username: deploy
#           key: ${{ secrets.DEPLOY_KEY }}
#           script: |
#             cd /opt/myapp
#             git pull origin main
#             docker compose build
#             docker compose up -d